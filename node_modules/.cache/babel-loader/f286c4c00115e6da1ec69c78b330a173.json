{"ast":null,"code":"import _objectSpread from \"/Users/guillaumedg/training/react.js/recipe-editor/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/guillaumedg/training/react.js/recipe-editor/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/guillaumedg/training/react.js/recipe-editor/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/guillaumedg/training/react.js/recipe-editor/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/guillaumedg/training/react.js/recipe-editor/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/guillaumedg/training/react.js/recipe-editor/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/guillaumedg/training/react.js/recipe-editor/src/hoc/withFirebase.js\";\nimport React, { Component } from \"react\";\nimport recettes from \"../recettes\"; // Firebase\n\nimport base from \"../base\";\n\nvar withFirebase = function withFirebase(WrappedComponent) {\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(HOC, _Component);\n\n      function HOC() {\n        var _getPrototypeOf2;\n\n        var _this;\n\n        _classCallCheck(this, HOC);\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(HOC)).call.apply(_getPrototypeOf2, [this].concat(args)));\n        _this.state = {\n          pseudo: _this.props.match.params.pseudo,\n          recettes: {}\n        };\n\n        _this.ajouterRecette = function (recette) {\n          var recettes = _objectSpread({}, _this.state.recettes);\n\n          recettes[\"recette-\".concat(Date.now())] = recette;\n\n          _this.setState({\n            recettes: recettes\n          });\n        };\n\n        _this.majRecette = function (key, newRecette) {\n          var recettes = _objectSpread({}, _this.state.recettes);\n\n          recettes[key] = newRecette;\n\n          _this.setState({\n            recettes: recettes\n          });\n        };\n\n        _this.supprimerRecette = function (key) {\n          var recettes = _objectSpread({}, _this.state.recettes);\n\n          recettes[key] = null;\n\n          _this.setState({\n            recettes: recettes\n          });\n        };\n\n        _this.chargerExemple = function () {\n          return _this.setState({\n            recettes: recettes\n          });\n        };\n\n        return _this;\n      }\n\n      _createClass(HOC, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          this.ref = base.syncState(\"/\".concat(this.state.pseudo, \"/recettes\"), {\n            context: this,\n            state: \"recettes\"\n          });\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          base.removeBinding(this.ref);\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          return React.createElement(WrappedComponent, Object.assign({\n            recettes: this.state.recettes,\n            ajouterRecette: this.ajouterRecette,\n            majRecette: this.majRecette,\n            chargerExemple: this.chargerExemple,\n            supprimerRecette: this.supprimerRecette\n          }, this.props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 45\n            },\n            __self: this\n          }));\n        }\n      }]);\n\n      return HOC;\n    }(Component)\n  );\n};\n\nexport default withFirebase;","map":{"version":3,"sources":["/Users/guillaumedg/training/react.js/recipe-editor/src/hoc/withFirebase.js"],"names":["React","Component","recettes","base","withFirebase","WrappedComponent","state","pseudo","props","match","params","ajouterRecette","recette","Date","now","setState","majRecette","key","newRecette","supprimerRecette","chargerExemple","ref","syncState","context","removeBinding"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,aAArB,C,CACA;;AACA,OAAOC,IAAP,MAAiB,SAAjB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAC,gBAAgB;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,cAEjCC,KAFiC,GAEzB;AACNC,UAAAA,MAAM,EAAE,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,MAD1B;AAENL,UAAAA,QAAQ,EAAE;AAFJ,SAFyB;;AAAA,cAiBjCS,cAjBiC,GAiBhB,UAAAC,OAAO,EAAI;AAC1B,cAAMV,QAAQ,qBAAQ,MAAKI,KAAL,CAAWJ,QAAnB,CAAd;;AACAA,UAAAA,QAAQ,mBAAYW,IAAI,CAACC,GAAL,EAAZ,EAAR,GAAoCF,OAApC;;AACA,gBAAKG,QAAL,CAAc;AAAEb,YAAAA,QAAQ,EAARA;AAAF,WAAd;AACD,SArBgC;;AAAA,cAuBjCc,UAvBiC,GAuBpB,UAACC,GAAD,EAAMC,UAAN,EAAqB;AAChC,cAAMhB,QAAQ,qBAAQ,MAAKI,KAAL,CAAWJ,QAAnB,CAAd;;AACAA,UAAAA,QAAQ,CAACe,GAAD,CAAR,GAAgBC,UAAhB;;AACA,gBAAKH,QAAL,CAAc;AAAEb,YAAAA,QAAQ,EAARA;AAAF,WAAd;AACD,SA3BgC;;AAAA,cA6BjCiB,gBA7BiC,GA6Bd,UAAAF,GAAG,EAAI;AACxB,cAAMf,QAAQ,qBAAQ,MAAKI,KAAL,CAAWJ,QAAnB,CAAd;;AACAA,UAAAA,QAAQ,CAACe,GAAD,CAAR,GAAgB,IAAhB;;AACA,gBAAKF,QAAL,CAAc;AAAEb,YAAAA,QAAQ,EAARA;AAAF,WAAd;AACD,SAjCgC;;AAAA,cAmCjCkB,cAnCiC,GAmChB;AAAA,iBAAM,MAAKL,QAAL,CAAc;AAAEb,YAAAA,QAAQ,EAARA;AAAF,WAAd,CAAN;AAAA,SAnCgB;;AAAA;AAAA;;AAAA;AAAA;AAAA,4CAMb;AAClB,eAAKmB,GAAL,GAAWlB,IAAI,CAACmB,SAAL,YAAmB,KAAKhB,KAAL,CAAWC,MAA9B,gBAAiD;AAC1DgB,YAAAA,OAAO,EAAE,IADiD;AAE1DjB,YAAAA,KAAK,EAAE;AAFmD,WAAjD,CAAX;AAID;AAXgC;AAAA;AAAA,+CAaV;AACrBH,UAAAA,IAAI,CAACqB,aAAL,CAAmB,KAAKH,GAAxB;AACD;AAfgC;AAAA;AAAA,iCAqCxB;AACP,iBACE,oBAAC,gBAAD;AACE,YAAA,QAAQ,EAAE,KAAKf,KAAL,CAAWJ,QADvB;AAEE,YAAA,cAAc,EAAE,KAAKS,cAFvB;AAGE,YAAA,UAAU,EAAE,KAAKK,UAHnB;AAIE,YAAA,cAAc,EAAE,KAAKI,cAJvB;AAKE,YAAA,gBAAgB,EAAE,KAAKD;AALzB,aAMM,KAAKX,KANX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF;AAUD;AAhDgC;;AAAA;AAAA,MACjBP,SADiB;AAAA;AAAA,CAArC;;AAmDA,eAAeG,YAAf","sourcesContent":["import React, { Component } from \"react\";\nimport recettes from \"../recettes\";\n// Firebase\nimport base from \"../base\";\n\nconst withFirebase = WrappedComponent =>\n  class HOC extends Component {\n    state = {\n      pseudo: this.props.match.params.pseudo,\n      recettes: {}\n    };\n    componentDidMount() {\n      this.ref = base.syncState(`/${this.state.pseudo}/recettes`, {\n        context: this,\n        state: \"recettes\"\n      });\n    }\n\n    componentWillUnmount() {\n      base.removeBinding(this.ref);\n    }\n\n    ajouterRecette = recette => {\n      const recettes = { ...this.state.recettes };\n      recettes[`recette-${Date.now()}`] = recette;\n      this.setState({ recettes });\n    };\n\n    majRecette = (key, newRecette) => {\n      const recettes = { ...this.state.recettes };\n      recettes[key] = newRecette;\n      this.setState({ recettes });\n    };\n\n    supprimerRecette = key => {\n      const recettes = { ...this.state.recettes };\n      recettes[key] = null;\n      this.setState({ recettes });\n    };\n\n    chargerExemple = () => this.setState({ recettes });\n\n    render() {\n      return (\n        <WrappedComponent\n          recettes={this.state.recettes}\n          ajouterRecette={this.ajouterRecette}\n          majRecette={this.majRecette}\n          chargerExemple={this.chargerExemple}\n          supprimerRecette={this.supprimerRecette}\n          {...this.props}\n        />\n      );\n    }\n  };\n\nexport default withFirebase;\n"]},"metadata":{},"sourceType":"module"}